#!@AWK@ -f

# LMDBG helper script
#
# Input:
#   malloc/realloc/free ...
#    address1
#    address2
#    address3
# Output:
#   malloc/realloc/free ...<SPACE>address1<SUBSEP>address2<SUBSEP>address3

BEGIN {
	first = 1
}

/^ / {
    gsub(/\t/, "\033")
	if (!first)
		printf SUBSEP
	first = 0
	printf "%s", substr($0, 2)
	next
}

{
	if (NR > 1)
		printf "\n"

	first = 1
	printf "%s ", $0
}

END {
	if (NR >= 1)
		printf "\n"
}
